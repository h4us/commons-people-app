<DockLayout stretchLasthChild="true" class="bg-theme-secondary">
  <StackLayout dock="top">
    <CustomActionBar *ngIf="field == 'memberIds'"
      [title]="title" leftIcon="&#xe92f;" rightIcon="&#xe9b1;"
      (onAprove)="addMember()"></CustomActionBar>

    <CustomActionBar *ngIf="field != 'memberIds'"
      [title]="title" leftIcon="&#xe92f;" rightIcon="{{ touched && fieldIsValid ? '&#xe92b;' : '' }}"
      (onAprove)="submit()"></CustomActionBar>
  </StackLayout>

  <ScrollView row="1" width="100%" class="bg-theme-secondary">

    <StackLayout *ngIf="field != 'memberIds'"
      orientation="vertical" class="p-15 form" [formGroup]="gForm">

      <TextView
        #activeInput
        class="input"
        [class.error]="firstError"
        [hint]="title"
        [formControlName]="field"
        (returnPress)="onValidate()"></TextView>

      <Label *ngIf="firstError?.required"
        class="text-error typo-annotation"
        text="必須のフィールドです"></Label>
      <Label *ngIf="firstError?.maxlength"
        class="text-error typo-annotation"
        text="{{ firstError?.maxlength?.requiredLength }}文字以内にしてください"></Label>
      <Label *ngIf="firstError?.minlength"
        class="text-error typo-annotation"
        text="{{ firstError?.minlength?.requiredLength }}文字以上にしてください"></Label>
      <Label *ngIf="firstError?.pattern"
        class="text-error typo-annotation"
        text="使用できない文字列が含まれています"></Label>
    </StackLayout>

    <StackLayout *ngIf="field == 'memberIds'">

      <ng-template ngFor let-item [ngForOf]="party" let-i="index">

        <StackLayout class="bg-theme-secondary">
          <CardView margin="1 15" elevation="5" class="bg-white">
            <StackLayout class="bg-clear">
              <GridLayout columns="80,*" rows="90" class="bg-clear">
                <Image col="0" class="m-x-10" style="border-radius:80;" stretch="aspectFill" width="60" height="60"
                  src="{{ item?.avatarUrl || '~/assets/placeholder__user.png' }}"></Image>
                <StackLayout col="1" orientation="horizontal" class="p-10">
                  <Label class="h3" text="{{ item?.username }}" virticalAlignment="stretch"></Label>
                </StackLayout>
              </GridLayout>
            </StackLayout>
          </CardView>
        </StackLayout>

      </ng-template>

    </StackLayout>

  </ScrollView>

</DockLayout>
