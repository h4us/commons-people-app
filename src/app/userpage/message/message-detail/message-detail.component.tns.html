<GridLayout height="100%" rows="60,*">
  <!--
       So tricky behavior..
       refs. https://github.com/tjvantoll/nativescript-IQKeyboardManager/issues/42#issuecomment-430179177
  -->

  <StackLayout #sizeAnchor class="util-anchor-full"></StackLayout>

  <StackLayout row="0" class="bg-theme-secondary" height="60">
    <CustomActionBar [title]="title" leftIcon="&#xe92f;" rightIcon="&#xea0a;"
      (onAprove)="sendPoint()"></CustomActionBar>
  </StackLayout>

  <ScrollView row="1" width="100%" height="100%" class="bg-theme-secondary">

    <GridLayout rows="*,auto" width="100%" height="100%">

      <ScrollView row="0" height="100%">
        <StackLayout>
          <ng-template ngFor let-item [ngForOf]="messageLog" let-i="index">
            <StackLayout class="p-x-30 p-y-15 bg-theme-secondary">
              <GridLayout *ngIf="(item.createdBy && (item.createdBy == user.id)); else elseBlock" columns="*" rows="*" class="bg-clear">
                <StackLayout col="0" class="p-15 bg-bubble" style="border-radius:20;">
                  <!-- <HtmlView class="bg-clear" [html]="styled(item.text)"></HtmlView> -->
                  <Label class="bg-clear typo-message" textWrap="true" [text]="item.text"></Label>
                </StackLayout>
              </GridLayout>
              <ng-template #elseBlock>
                <GridLayout columns="40,*" rows="*" class="bg-clear">
                  <Image col="0" class="m-x-10" style="border-radius:80;" stretch="aspectFill" width="32" height="32" verticalAlignment="top"
                    src="{{ item.photoUrl || '~/assets/placeholder__group.png' }}"></Image>
                  <StackLayout col="1" class="p-15 bg-white" style="border-radius:20;">
                    <!-- <HtmlView class="bg-clear" [html]="styled(item.text)"></HtmlView> -->
                    <Label class="bg-clear typo-message" textWrap="true" [text]="item.text"></Label>
                  </StackLayout>
                </GridLayout>
              </ng-template>
            </StackLayout>
          </ng-template>
        </StackLayout>
      </ScrollView>

      <StackLayout row="1" class="p-15 bg-white searchbox-like-container">

        <GridLayout columns="*,60" rosw="*" width="100%" class="bg-white searchbox-like-container">
          <StackLayout col="0" row="0" class="form searchbox-like-stretch">
            <TextView #sendTray [formControl]="sendText" editable="true"
              style="border-color:transparent; background-color:transparent;"></TextView>
          </StackLayout>
          <FlexboxLayout col="1" row="0"
            flexDirection="column"
            alignItems="stretch"
            justifyContent="flex-end">
            <Label class="icon followIcon text-center p-y-10" text="&#xe9c2;"
            (tap)="sendMessage()"></Label>
          </FlexboxLayout>
        </GridLayout>

      </StackLayout>

    </GridLayout>

  </ScrollView>

</GridLayout>
