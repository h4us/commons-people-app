<AbsoluteLayout>
  <StackLayout #sizeAnchor class="util-anchor-full"></StackLayout>

  <GridLayout rows="auto,*" width="100%" height="100%" class="bg-theme-secondary">
    <StackLayout row="0">
      <StackLayout padding="15 20">
        <CustomSearchbox
          placeholder="メッセージを検索"
          followContent="キャンセル"
          focusAtInit="true"
          (onSearch)="searchAction($event)"
          (onTapFollowContent)="cancelAction()"></CustomSearchbox>
      </StackLayout>

      <!-- // -->
      <StackLayout orientation="horizontal" width="100%" height="58" class="bg-white p-x-15">
        <ScrollView orientation="horizontal">
          <StackLayout orientation="horizontal">
            <Label text="メンバー" padding="5 20" class="bg-clear" virticalAlignment="bottom"
              [ngClass]="{ 'bottom-border-theme': filterBy == 'member' , 'bottom-border-clear': filterBy != 'member' }"
              (tap)="onNavItemTap('member')"></Label>
            <Label text="メッセージ" padding="5 20" class="bg-clear bottom-border-theme" virticalAlignment="bottom"
              [ngClass]="{ 'bottom-border-theme': filterBy != 'member' , 'bottom-border-clear': filterBy == 'member' }"
              (tap)="onNavItemTap('message')"></Label>
          </StackLayout>
        </ScrollView>
      </StackLayout>
    </StackLayout>

    <RadListView row="1" class="bg-clear"
      [items]="currentList"
      (itemTap)="onItemTap($event)">
      <ng-template tkListItemTemplate let-item="item" let-i="index">
        <!-- // item -->
        <StackLayout class="bg-theme-secondary">
          <CardView margin="{{ i == 0 ? '15 20 1' : '1 20' }}" elevation="5" class="bg-white">
            <StackLayout height="90">
              <GridLayout columns="80,*,60" rows="*" class="p-15">
                <Image col="0" class="m-r-15" style="border-radius:80;" stretch="aspectFill" width="60" height="60" loadMode="async"
                  src="{{ item.photoUrl || '~/assets/placeholder__group.png' }}"></Image>
                <StackLayout col="1" verticalAlignment="center">
                  <Label class="typo-list-heading" text="{{ item.title }}"></Label>
                  <Label class="typo-list-preview" text="{{ item.lastMessage.text }}" android:style="margin-top:-10;"></Label>
                </StackLayout>
                <Label col="2" class="typo-list-date" style="vertical-align:top; text-align:right;"
                  text="{{ item.lastMessage.createdAt | amLocal | amDateFormat: 'HH:mm' }}"></Label>
              </GridLayout>
            </StackLayout>
          </CardView>
        </StackLayout>
      </ng-template>
    </RadListView>
  </GridLayout>
</AbsoluteLayout>
