<AbsoluteLayout>
  <StackLayout #sizeAnchor class="util-anchor-full"></StackLayout>

  <GridLayout rows="*" width="100%" height="100%" class="bg-theme-secondary" style="padding-top:58;">
    <RadListView row="0" class="p-y-15 bg-clear"
      [items]="currentList"
      (itemTap)="onItemTap($event)">
      <ng-template tkListItemTemplate let-item="item" let-i="index">
        <!-- // item -->
        <StackLayout class="bg-theme-secondary">
          <CardView margin="1 20" elevation="5" class="bg-white">
            <StackLayout height="90">
              <GridLayout columns="80,*,60" rows="*" class="p-15">
                <Image col="0" class="m-r-15" style="border-radius:80;" stretch="aspectFill" width="60" height="60" loadMode="async"
                  src="{{ item.photoUrl || '~/assets/placeholder__group.png' }}"></Image>
                <StackLayout col="1" verticalAlignment="center">
                  <Label class="typo-list-heading" text="{{ item.title }}"></Label>
                  <Label class="typo-list-preview" text="{{ item.lastMessage.text }}" android:style="margin-top:-10;"></Label>
                </StackLayout>
                <Label col="2" class="typo-list-date" style="vertical-align:top; text-align:right;"
                  text="{{ item.lastMessage.createdAt | amLocal | amDateFormat: 'HH:mm' }}"></Label>
              </GridLayout>
            </StackLayout>
          </CardView>
        </StackLayout>
      </ng-template>
      <!-- // header -->
      <ng-template tkListViewHeader>
        <StackLayout padding="20 20 15">
          <SearchboxLike
            placeholder="hello mr monky magic orchestra..."
            followContent="&#xe997;"
            followIsIcon="true"
            (onSearch)="false"
            (onClear)="false"
            (onCancel)="false"></SearchboxLike>
        </StackLayout>
      </ng-template>
    </RadListView>
  </GridLayout>

  <StackLayout orientation="horizontal" width="100%" height="58"  class="bg-white">
    <ScrollView orientation="horizontal">
      <StackLayout orientation="horizontal">
        <ng-template ngFor let-item [ngForOf]="navList" let-i="index">
          <Label text="{{ item.name }}" padding="5 20" class="bg-clear" virticalAlignment="bottom"
            [ngClass]="{ 'bottom-border-theme': currentCommunityId == item.id, 'bottom-border-clear': currentCommunityId != item.id }"
            (tap)="onNavItemTap(item)"></Label>
        </ng-template>
      </StackLayout>
    </ScrollView>
  </StackLayout>

  <FAB #floatingButton
    left="-200"
    top="-200"
    (tap)="onFabTap('thread-new')"
    class="fab-btn" icon="~/assets/fabtn-plus-72x72.png" backgroundColor="#1f977c"></FAB>
</AbsoluteLayout>
